# POET Bench


## é¡¹ç›®æ¦‚è¿°

POET Bench æ˜¯ä¸€ä¸ªä¸“ä¸ºè¯„ä¼°æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“ï¼ˆDeep Research Agents, DRAsï¼‰è®¾è®¡çš„ç»¼åˆåŸºå‡†æµ‹è¯•ç³»ç»Ÿã€‚æœ¬ç³»ç»ŸåŸºäºPOETè¯„ä¼°æ¡†æ¶ï¼ˆPerformance, Operability, Efficiency, Trustworthinessï¼‰ï¼Œé€šè¿‡ä¸‰å¤§æ ¸å¿ƒç»´åº¦è¯„ä¼°AIæ™ºèƒ½ä½“çš„çœŸå®å•†ä¸šä»·å€¼å’ŒæŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰ã€‚

### POETæ¡†æ¶æ ¸å¿ƒç†å¿µ

POETåŸºå‡†è®¾è®¡ç†å¿µæ˜¯"å§‹äºç»ˆå±€"â€”â€”é¦–å…ˆå›ç­”ä¸€ä¸ªæ ¹æœ¬é—®é¢˜ï¼šä¸€ä¸ªå€¼å¾—ä¼ä¸šä¿¡èµ–å¹¶ä¸ºå…¶ä»˜è´¹çš„AIæ™ºèƒ½ä½“ï¼Œéœ€è¦æ»¡è¶³å†³ç­–è€…å“ªäº›æœ€æ ¸å¿ƒçš„å…³åˆ‡ï¼Ÿ

#### å››å¤§æ ¸å¿ƒå…³åˆ‡
1. **æ•ˆæœä¸ºç‹** (Effectiveness over Novelty)ï¼šä¸€åˆ‡å›´ç»•çœŸå®ä¸šåŠ¡åœºæ™¯ï¼Œå‡†ç¡®æ€§ã€æ·±åº¦å’Œå¯ç”¨æ€§æ˜¯å”¯ä¸€çš„ä»·å€¼å°ºåº¦
2. **ä¿¡ä»»ä¸éªŒè¯** (Trust through Transparency)ï¼šæä¾›æ¥æºã€åˆ—å‡ºä¾æ®ï¼Œå¯éªŒè¯æ€§æ˜¯å•†ä¸šåŒ–çš„åŸºçŸ³
3. **ä»·å€¼æå‡** (Value Creation over Efficiency)ï¼šç›´æ¥ä½œç”¨äºä¼ä¸šçš„åˆ©æ¶¦è¡¨å’Œé£é™©æ§åˆ¶
4. **å¯é æ€§ä¸ç¨³å®šæ€§** (Reliability as a Utility)ï¼šåƒç”µåŠ›ç³»ç»Ÿä¸€æ ·ç¨³å®šã€å¯é 

## Queryç­›é€‰ç³»ç»Ÿ

### 7ç»´åº¦æŸ¥è¯¢ä»·å€¼è¯„ä¼°æ¨¡å‹

POETä½¿ç”¨ä¸¥æ ¼çš„7ç»´åº¦è¯„ä¼°æ¨¡å‹ç­›é€‰é«˜ä»·å€¼è¯„æµ‹æŸ¥è¯¢ï¼Œç¡®ä¿æ¯ä¸ªæµ‹è¯•ä»»åŠ¡éƒ½ä¸ä¼ä¸šçœŸå®ç—›ç‚¹ç›´æ¥æŒ‚é’©ï¼š

| ç»´åº¦ | æƒé‡ | è¯„åˆ†èŒƒå›´ |
|------|------|----------|
| å†³ç­–é¢ è¦†æ€§ | 5% | 1åˆ†(å‚è€ƒçº§) - 5åˆ†(å†³å®šæ€§) |
| åˆ†æå¤æ‚æ€§ | 20% | 1åˆ†(ç®€å•æ£€ç´¢) - 5åˆ†(å¤šç»´å»ºæ¨¡) |
| è¡ŒåŠ¨å¯¼å‘æ€§ | 20% | 1åˆ†(æè¿°æ€§) - 5åˆ†(å¯æ‰§è¡Œ) |
| é£é™©/æ”¶ç›Šè§„æ¨¡ | 15% | 1åˆ†(å¾®ä¸è¶³é“) - 5åˆ†(æˆ˜ç•¥çº§) |
| æ—¶æ•ˆæ•æ„Ÿæ€§ | 10% | 1åˆ†(é™æ€çŸ¥è¯†) - 5åˆ†(å®æ—¶æƒ…æŠ¥) |
| ä¸“ä¸šå£å’ | 5% | 1åˆ†(é€šç”¨çŸ¥è¯†) - 5åˆ†(å°–ç«¯é¢†åŸŸ) |
| å¯éªŒè¯æ€§ | 25% | 1åˆ†(éš¾ä»¥éªŒè¯) - 5åˆ†(ææ˜“éªŒè¯) |

**æ€»åˆ†å…¬å¼**: Queryä»·å€¼åˆ† = Î£(ç»´åº¦å¾—åˆ† Ã— ç»´åº¦æƒé‡)

åªæœ‰Queryä»·å€¼åˆ†â‰¥4.5åˆ†çš„ä»»åŠ¡æ‰è¢«çº³å…¥è¯„ä¼°é›†ã€‚




## è¯„ä¼°æ¡†æ¶ï¼šPOETä¸‰å¤§ä»·å€¼ç»´åº¦

### 1. æ•ˆç‡ä»·å€¼ (Efficiency Value) - 30%
é‡åŒ–æ™ºèƒ½ä½“æœ€ç›´æ¥çš„ç»æµè´¡çŒ®ï¼Œå›ç­”"å¿«ä¸å¿«ï¼Œçœä¸çœ"çš„é—®é¢˜ï¼š
- **æ—¶é—´æ•ˆç‡**ï¼šå¯¹æ¯”æ™ºèƒ½ä½“ä¸é¢†åŸŸä¸“å®¶çš„è€—æ—¶ï¼Œé‡åŒ–"è§£æ”¾"å‡ºçš„ä¸“å®¶æ—¶é—´
- **æˆæœ¬æ•ˆç‡**ï¼šç²¾ç¡®è®¡ç®—æ™ºèƒ½ä½“å¸¦æ¥çš„å‡€æˆæœ¬èŠ‚çº¦
- **è‡ªåŠ¨åŒ–ç‡**ï¼šè¡¡é‡æ— éœ€äººå·¥å¹²é¢„çš„è‡ªåŠ¨åŒ–èŠ‚ç‚¹æ¯”ä¾‹
- **èµ„æºæ¶ˆè€—**ï¼šå®Œæˆä»»åŠ¡ä½¿ç”¨çš„tokenæ•°é‡å’Œè®¡ç®—èµ„æº

### 2. è´¨é‡ä»·å€¼ (Quality Value) - 50%
æ„å»ºäººæœºåä½œçš„ä¿¡ä»»åŸºçŸ³ï¼ŒåŒ…å«ä¸¤å¤§è¯„ä¼°ç»´åº¦ï¼š

#### RACEè¯„ä¼° (Reference-based Adaptive Criteria-driven Evaluation)
æˆæœçš„å®è§‚å“è´¨è¯„ä¼°ï¼ŒåŒ…å«å››ä¸ªç»´åº¦ï¼š
- **å…¨é¢æ€§** (Comprehensiveness)ï¼šä¿¡æ¯è¦†ç›–çš„å¹¿åº¦ã€æ·±åº¦å’Œç›¸å…³æ€§
- **æ´å¯ŸåŠ›** (Insight)ï¼šåˆ†æçš„æ·±åº¦ã€ç‹¬åˆ°æ€§ã€é€»è¾‘æ€§å’Œç»“è®ºä»·å€¼
- **æŒ‡ä»¤éµå¾ªèƒ½åŠ›** (Instruction Following)ï¼šæŠ¥å‘Šæ˜¯å¦å‡†ç¡®ã€å®Œæ•´åœ°å›åº”äº†ä»»åŠ¡çš„æ‰€æœ‰è¦æ±‚
- **å¯è¯»æ€§** (Readability)ï¼šç»“æ„æ¸…æ™°åº¦ã€è¯­è¨€æµç•…åº¦ã€æ•°æ®å‘ˆç°æ•ˆæœ

#### FACTè¯„ä¼° (Framework for Factual Abundance and Citation Trustworthiness)
äº‹å®çš„å¾®è§‚æº¯æºæ ¡éªŒï¼Œé‡ç‚¹å…³æ³¨ï¼š
- **æœ‰æ•ˆå¼•ç”¨æ•°** (Effective Citations)ï¼šå¹³å‡æ¯ç¯‡æŠ¥å‘ŠåŒ…å«å¤šå°‘æ¡æœ‰äº‹å®ä¾æ®æ”¯æ’‘çš„å¼•ç”¨
- **å¼•ç”¨å‡†ç¡®ç‡** (Citation Accuracy)ï¼šæ‰€æœ‰å¼•ç”¨ä¸­ï¼Œæœ‰å¤šå°‘æ¯”ä¾‹æ˜¯å‡†ç¡®æ— è¯¯çš„

### 3. æˆ˜ç•¥ä»·å€¼ (Strategic Value) - 20%
é©±åŠ¨ç»„ç»‡è¿›åŒ–çš„çŸ¥è¯†é£è½®ï¼Œè¯„ä¼°æ™ºèƒ½ä½“è¶…è¶Šå•æ¬¡ä»»åŠ¡çš„é•¿æœŸèµ‹èƒ½ï¼š
- **å¤æ‚ä»»åŠ¡å¤„ç†èƒ½åŠ›**ï¼šèƒ½å¦ç‹¬ç«‹å¤„ç†äººç±»ä¸“å®¶éœ€åŠå°æ—¶ä»¥ä¸Šæ‰èƒ½å®Œæˆçš„æ·±åº¦ç ”ç©¶
- **çŸ¥è¯†æ²‰æ·€ä¸å¤ç”¨**ï¼šèƒ½å¦å°†ä»»åŠ¡äº§å‡ºæ²‰æ·€åˆ°çŸ¥è¯†åº“ï¼Œå¹¶åœ¨åç»­ä»»åŠ¡ä¸­æ™ºèƒ½å¤ç”¨

## åŸºå‡†æ•°æ®é›†æ„å»º

### ä»»åŠ¡é€‰æ‹©æ ‡å‡†
ç³»ç»Ÿé‡‡ç”¨7ä¸ªç»´åº¦çš„Queryä»·å€¼è¯„ä¼°æ¨¡å‹ç­›é€‰é«˜ä»·å€¼æµ‹è¯•ä»»åŠ¡ï¼š

| ç»´åº¦ | æƒé‡ | è¯„åˆ†èŒƒå›´ |
|------|------|----------|
| å†³ç­–é¢ è¦†æ€§ | 5% | 1åˆ†(å‚è€ƒçº§) - 5åˆ†(å†³å®šæ€§) |
| åˆ†æå¤æ‚æ€§ | 20% | 1åˆ†(ç®€å•æ£€ç´¢) - 5åˆ†(å¤šç»´å»ºæ¨¡) |
| è¡ŒåŠ¨å¯¼å‘æ€§ | 20% | 1åˆ†(æè¿°æ€§) - 5åˆ†(å¯æ‰§è¡Œ) |
| é£é™©/æ”¶ç›Šè§„æ¨¡ | 15% | 1åˆ†(å¾®ä¸è¶³é“) - 5åˆ†(æˆ˜ç•¥çº§) |
| æ—¶æ•ˆæ•æ„Ÿæ€§ | 10% | 1åˆ†(é™æ€çŸ¥è¯†) - 5åˆ†(å®æ—¶æƒ…æŠ¥) |
| ä¸“ä¸šå£å’ | 5% | 1åˆ†(é€šç”¨çŸ¥è¯†) - 5åˆ†(å°–ç«¯é¢†åŸŸ) |
| å¯éªŒè¯æ€§ | 25% | 1åˆ†(éš¾ä»¥éªŒè¯) - 5åˆ†(ææ˜“éªŒè¯) |

åªæœ‰Queryä»·å€¼åˆ†â‰¥4.5åˆ†çš„ä»»åŠ¡æ‰è¢«çº³å…¥è¯„ä¼°é›†ï¼Œç¡®ä¿æ¯ä¸ªæµ‹è¯•ä»»åŠ¡éƒ½ä¸ä¼ä¸šçœŸå®ç—›ç‚¹å’Œéœ€æ±‚ç›´æ¥æŒ‚é’©ã€‚

### æ•°æ®é›†è§„æ¨¡
åŸºå‡†æµ‹è¯•åŒ…å«**100ä¸ªPhDçº§åˆ«ç ”ç©¶ä»»åŠ¡**ï¼Œç”±å„é¢†åŸŸä¸“å®¶ç²¾å¿ƒè®¾è®¡ï¼Œè¦†ç›–**22ä¸ªä¸åŒé¢†åŸŸ**ï¼š

* ğŸ”¬ **ç§‘å­¦ä¸æŠ€æœ¯**: ç‰©ç†ã€åŒ–å­¦ã€ç”Ÿç‰©ã€ç¯å¢ƒç§‘å­¦å’Œå·¥ç¨‹å­¦
* ğŸ’¼ **é‡‘èä¸å•†ä¸š**: æŠ•èµ„ã€ä¸ªäººç†è´¢ã€å¸‚åœºè¥é”€å’ŒäººåŠ›èµ„æº
* ğŸ’» **è½¯ä»¶æŠ€æœ¯**: è½¯ä»¶ä½¿ç”¨å’Œäº’è”ç½‘ç›¸å…³ä¸»é¢˜
* ğŸŒ **å…¶ä»–é¢†åŸŸ**: è‰ºæœ¯è®¾è®¡ã€å¨±ä¹ã€å†å²ã€å·¥ä¸šã€äº¤é€šã€æ—…æ¸¸ç­‰


## æ•°æ®æ ¼å¼è§„èŒƒ

### è¾“å…¥æ•°æ®æ ¼å¼

åŸºç¡€çš„è¾“å…¥æ•°æ®æ ¼å¼åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šå¢åŠ å®¢è§‚æŒ‡æ ‡å­—æ®µï¼š

```json
{
    "id": "ä»»åŠ¡ID",
    "prompt": "ç”¨æˆ·è¾“å…¥çš„ç ”ç©¶æŸ¥è¯¢",
    "article": "AIæ™ºèƒ½ä½“ç”Ÿæˆçš„ç ”ç©¶æŠ¥å‘Š",
    "execution_metrics": {
        "total_duration_seconds": 1200,
        "token_usage": {
            "input_tokens": 2500,
            "output_tokens": 12000,
            "total_cost_usd": 0.087
        },
        "automation_level": 0.95,
        "tool_calls_count": 8,
        "sources_used": 15,
        "citation_count": 22,
        "word_count": 8500
    }
}
```

#### å®¢è§‚æŒ‡æ ‡å­—æ®µè¯´æ˜

**execution_metrics** åŒ…å«ä»¥ä¸‹ä¸éœ€è¦äººå·¥æ ‡æ³¨å’ŒLLMè¯„ä¼°çš„å®¢è§‚æŒ‡æ ‡ï¼š

- `total_duration_seconds`: ä»»åŠ¡å®é™…æ‰§è¡Œæ€»æ—¶é—´ï¼ˆç§’ï¼‰
- `token_usage`: Tokenä½¿ç”¨æƒ…å†µ
  - `input_tokens`: è¾“å…¥tokenæ€»æ•°
  - `output_tokens`: è¾“å‡ºtokenæ€»æ•°
  - `total_cost_usd`: å®é™…äº§ç”Ÿçš„è´¹ç”¨ï¼ˆç¾å…ƒï¼‰
- `automation_level`: è‡ªåŠ¨åŒ–ç¨‹åº¦ï¼ˆ0-1ï¼Œ1è¡¨ç¤ºå®Œå…¨è‡ªåŠ¨åŒ–ï¼‰
- `tool_calls_count`: å·¥å…·è°ƒç”¨æ€»æ¬¡æ•°
- `sources_used`: ä½¿ç”¨çš„ä¿¡æ¯æºæ•°é‡
- `citation_count`: å¼•ç”¨æ•°é‡
- `word_count`: è¾“å‡ºæ–‡æ¡£å­—æ•°

### äººå·¥æ ‡æ³¨æ•°æ®è¦æ±‚

ç³»ç»Ÿéœ€è¦ä»¥ä¸‹äººå·¥æ ‡æ³¨æ•°æ®æ–‡ä»¶ï¼Œä½äº `data/annotation/` ç›®å½•ï¼š

#### 1. é¢†åŸŸä¸“å®¶æ•°æ® (`domain_expert_data.json`)
```json
{
    "finance": {
        "avg_hourly_rate_usd": 200,
        "avg_task_time_hours": 2.5
    },
    "technology": {
        "avg_hourly_rate_usd": 180,
        "avg_task_time_hours": 3.0
    },
    "healthcare": {
        "avg_hourly_rate_usd": 250,
        "avg_task_time_hours": 2.8
    }
}
```

#### 2. ä»»åŠ¡å¤æ‚åº¦æ•°æ® (`complexity_level_data.json`)
```json
{
    "1": {
        "description": "ç®€å•ä¿¡æ¯æ£€ç´¢",
        "expert_time_multiplier": 0.5,
        "difficulty_score": 1
    },
    "2": {
        "description": "åŸºç¡€åˆ†æä»»åŠ¡",
        "expert_time_multiplier": 0.7,
        "difficulty_score": 2
    },
    "3": {
        "description": "ä¸­ç­‰å¤æ‚åº¦ç ”ç©¶",
        "expert_time_multiplier": 1.0,
        "difficulty_score": 3
    },
    "4": {
        "description": "æ·±åº¦åˆ†æç ”ç©¶",
        "expert_time_multiplier": 1.5,
        "difficulty_score": 4
    },
    "5": {
        "description": "ä¸“å®¶çº§å¤æ‚ç ”ç©¶",
        "expert_time_multiplier": 2.0,
        "difficulty_score": 5
    }
}
```

#### 3. Tokenå®šä»·æ•°æ® (`token_pricing_data.json`)
```json
{
    "claude-3-sonnet": {
        "input_price_per_1k": 0.003,
        "output_price_per_1k": 0.015
    },
    "gpt-4": {
        "input_price_per_1k": 0.01,
        "output_price_per_1k": 0.03
    },
    "gemini-pro": {
        "input_price_per_1k": 0.00125,
        "output_price_per_1k": 0.00375
    }
}
```


## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒé…ç½®

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. è®¾ç½®APIå¯†é’¥
export OPENAI_API_KEY="your_openai_api_key"
export OPENAI_BASE_URL="https://openrouter.ai/api/v1"
export OPENAI_MODEL="google/gemini-2.5-pro"
export JINA_API_KEY="your_jina_api_key"
```

### æ•°æ®å‡†å¤‡

å°†æ‚¨çš„æµ‹è¯•æ•°æ®æ”¾ç½®åœ¨ä»¥ä¸‹ç›®å½•ç»“æ„ä¸­ï¼š

```
data/
â”œâ”€â”€ test_data/raw_data/
â”‚   â””â”€â”€ your_model.jsonl          # æ¨¡å‹è¾“å‡ºæ•°æ®ï¼ˆåŒ…å«execution_metricsï¼‰
â”œâ”€â”€ prompt_data/
â”‚   â””â”€â”€ query.jsonl                # 100ä¸ªç ”ç©¶ä»»åŠ¡æŸ¥è¯¢
â”œâ”€â”€ annotation/                    # äººå·¥æ ‡æ³¨æ•°æ®ï¼ˆå¿…éœ€ï¼‰
â”‚   â”œâ”€â”€ domain_expert_data.json
â”‚   â”œâ”€â”€ complexity_level_data.json
â”‚   â””â”€â”€ token_pricing_data.json
â””â”€â”€ reference/
    â””â”€â”€ reference.jsonl            # å‚è€ƒç­”æ¡ˆï¼ˆç”¨äºRACEè¯„ä¼°ï¼‰
```

### æŸ¥è¯¢ç­›é€‰å’Œæ•°æ®å‡†å¤‡

#### ç¬¬ä¸€æ­¥ï¼šç­›é€‰é«˜ä»·å€¼æŸ¥è¯¢ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰

```bash
# åŸºäºPOET 7ç»´åº¦æ¨¡å‹ç­›é€‰é«˜ä»·å€¼æŸ¥è¯¢
python query_selector.py \
    --input_file query_analysis/raw_query.md \
    --output_dir query_analysis/ \
    --threshold 4.0 \
    --export_selected \
    --max_workers 8

# æŸ¥çœ‹ç­›é€‰ç»“æœ
ls query_analysis/
# è¾“å‡ºæ–‡ä»¶:
# - query_scores.json        # å®Œæ•´è¯„åˆ†ç»“æœ
# - query_scores.csv         # CSVæ ¼å¼ç»“æœ
# - selected_queries.jsonl   # ç­›é€‰çš„é«˜ä»·å€¼æŸ¥è¯¢
```

### è¿è¡Œå®Œæ•´è¯„ä¼°

#### æ–¹æ³•ä¸€ï¼šå®Œæ•´POETè¯„ä¼°ï¼ˆæœ€æ–°æ¨èï¼‰

```bash
# ä½¿ç”¨é…ç½®é©±åŠ¨çš„å®Œæ•´POETè¯„ä¼°ç³»ç»Ÿ
python poet_benchmark.py --config config/poet_algorithm_config.json

# æˆ–æŒ‡å®šå…·ä½“æ¨¡å‹
python poet_benchmark.py "model_name" \
    --config config/poet_algorithm_config.json \
    --input_file data/test_data/raw_data/model_name.jsonl \
    --output_dir results/poet/model_name
```

#### æ–¹æ³•äºŒï¼šä¸€é”®å¼POETè¯„ä¼°ï¼ˆæ¨èï¼‰

```bash
# ä¿®æ”¹ run_benchmark.sh ä¸­çš„æ¨¡å‹åç§°
TARGET_MODELS=("your-model-name")

# ä¸€é”®å¼è¿è¡Œï¼šè‡ªåŠ¨æŸ¥è¯¢ç­›é€‰ + åŠ¨æ€æ ‡å‡†ç”Ÿæˆ + RACE+FACTè¯„ä¼°
ENABLE_QUERY_SELECTION=true bash run_benchmark.sh

# ä¼ ç»Ÿè¯„ä¼°ï¼ˆä¸ä½¿ç”¨POETç­›é€‰ï¼‰
bash run_benchmark.sh
```

**æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼š**
- âœ… **Queryè¯„åˆ†ç¼“å­˜**: åªåœ¨åŸå§‹æŸ¥è¯¢æ–‡ä»¶å˜åŒ–æ—¶é‡æ–°è¯„åˆ†ï¼Œé¿å…é‡å¤çš„æ˜‚è´µLLMè°ƒç”¨
- âœ… **Criteriaç”Ÿæˆç¼“å­˜**: åªåœ¨ç­›é€‰ç»“æœå˜åŒ–æ—¶é‡æ–°ç”ŸæˆåŠ¨æ€æ ‡å‡†
- âœ… **å¿«é€Ÿé˜ˆå€¼è°ƒæ•´**: åŸºäºç¼“å­˜è¯„åˆ†æ–‡ä»¶å¿«é€Ÿå°è¯•ä¸åŒç­›é€‰é˜ˆå€¼
- âœ… **å·¥å…·æ•´åˆ**: `query_selector.py` é›†æˆäº†ç­›é€‰å’Œæ ¼å¼è½¬æ¢åŠŸèƒ½

**å·¥ä½œæµç¨‹ä¼˜åŒ–ï¼š**
```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œï¼šå®Œæ•´æµç¨‹
raw_query.md â†’ 7ç»´åº¦è¯„åˆ† â†’ ç­›é€‰ â†’ criteriaç”Ÿæˆ â†’ è¯„ä¼°

# åç»­è¿è¡Œï¼šæ™ºèƒ½å¤ç”¨
cached_scores â†’ æ–°é˜ˆå€¼ç­›é€‰ â†’ cached_criteria â†’ è¯„ä¼°
```

#### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨åˆ†æ­¥è¿è¡Œ

**æ­¥éª¤1ï¼šQueryç­›é€‰å’Œè¯„åˆ†ï¼ˆæ™ºèƒ½ç¼“å­˜ï¼‰**
```bash
# å®Œæ•´è¯„åˆ†ï¼ˆç¬¬ä¸€æ¬¡æˆ–åŸå§‹æŸ¥è¯¢å˜åŒ–æ—¶ï¼‰
python query_selector.py \
    --input_file query_analysis/raw_query.md \
    --output_dir query_analysis/ \
    --threshold 4.0 \
    --convert_to_jsonl data/prompt_data/query.jsonl

# å¿«é€Ÿç­›é€‰ï¼ˆä½¿ç”¨ç¼“å­˜è¯„åˆ†ï¼Œè°ƒæ•´é˜ˆå€¼ï¼‰
python query_selector.py \
    --from_scores query_analysis/query_scores.json \
    --threshold 4.5 \
    --convert_to_jsonl data/prompt_data/query.jsonl
```

**æ­¥éª¤2ï¼šåŠ¨æ€è¯„ä¼°æ ‡å‡†ç”Ÿæˆï¼ˆæ™ºèƒ½ç¼“å­˜ï¼‰**
```bash
# è‡ªåŠ¨æ£€æµ‹æ˜¯å¦éœ€è¦é‡æ–°ç”Ÿæˆcriteria
python query_rubrics_generator.py
```

**æ­¥éª¤3ï¼šæ¨¡å‹è¾“å‡ºè¯„ä¼°**
```bash
# RACEè¯„ä¼°ï¼ˆä½¿ç”¨ç­›é€‰åçš„æŸ¥è¯¢å’ŒåŠ¨æ€æ ‡å‡†ï¼‰
python deepresearch_bench_race.py "model_name" \
    --raw_data_dir data/test_data/raw_data \
    --query_file data/prompt_data/query.jsonl \
    --output_dir results/race/model_name \
    --max_workers 10

**æ­¥éª¤4ï¼šFACTè¯„ä¼°æµæ°´çº¿**
```bash
python -m utils.extract \
    --raw_data_path data/test_data/raw_data/model_name.jsonl \
    --output_path results/fact/model_name/extracted.jsonl \
    --query_data_path data/prompt_data/query.jsonl \
    --n_total_process 10

python -m utils.deduplicate \
    --raw_data_path results/fact/model_name/extracted.jsonl \
    --output_path results/fact/model_name/deduplicated.jsonl \
    --query_data_path data/prompt_data/query.jsonl \
    --n_total_process 10

python -m utils.scrape \
    --raw_data_path results/fact/model_name/deduplicated.jsonl \
    --output_path results/fact/model_name/scraped.jsonl \
    --n_total_process 10

python -m utils.validate \
    --raw_data_path results/fact/model_name/scraped.jsonl \
    --output_path results/fact/model_name/validated.jsonl \
    --query_data_path data/prompt_data/query.jsonl \
    --n_total_process 10

python -m utils.stat \
    --input_path results/fact/model_name/validated.jsonl \
    --output_path results/fact/model_name/fact_result.txt

# 5. ä¸‰ç»´ä»·å€¼è¯„ä¼°
python -m utils.efficiency_evaluator_clean \
    --input_file data/test_data/raw_data/model_name.jsonl \
    --output_dir results/efficiency/model_name

python -m utils.strategic_evaluator \
    --input_file data/test_data/raw_data/model_name.jsonl \
    --output_dir results/strategic/model_name

python -m utils.web_interaction_evaluator \
    --input_file data/test_data/raw_data/model_name.jsonl \
    --output_dir results/web_interaction/model_name

# 6. POETç»¼åˆè¯„ä¼°
python poet_benchmark.py "model_name" \
    --config config/poet_algorithm_config.json \
    --input_file data/test_data/raw_data/model_name.jsonl \
    --output_dir results/poet/model_name
```

### æŸ¥çœ‹è¯„ä¼°ç»“æœ

è¯„ä¼°å®Œæˆåï¼Œç»“æœå°†ä¿å­˜åœ¨ä»¥ä¸‹ä½ç½®ï¼š

```
results/
â”œâ”€â”€ race/model_name/
â”‚   â””â”€â”€ race_result.txt              # RACE 4ç»´åº¦è´¨é‡è¯„ä¼°ç»“æœ
â”œâ”€â”€ fact/model_name/
â”‚   â”œâ”€â”€ extracted.jsonl              # æå–çš„äº‹å®é™ˆè¿°å’Œå¼•ç”¨
â”‚   â”œâ”€â”€ deduplicated.jsonl           # å»é‡åçš„å¼•ç”¨
â”‚   â”œâ”€â”€ scraped.jsonl                # ç½‘é¡µå†…å®¹æŠ“å–ç»“æœ
â”‚   â”œâ”€â”€ validated.jsonl              # å¼•ç”¨éªŒè¯ç»“æœ
â”‚   â””â”€â”€ fact_result.txt              # FACTæœ€ç»ˆç»Ÿè®¡ç»“æœ
â”œâ”€â”€ efficiency/model_name/
â”‚   â””â”€â”€ efficiency_report.json       # æ•ˆç‡ä»·å€¼è¯„ä¼°ç»“æœ
â”œâ”€â”€ strategic/model_name/
â”‚   â””â”€â”€ strategic_report.json        # æˆ˜ç•¥ä»·å€¼è¯„ä¼°ç»“æœ
â”œâ”€â”€ web_interaction/model_name/
â”‚   â””â”€â”€ web_interaction_report.json  # Webäº¤äº’èƒ½åŠ›è¯„ä¼°ç»“æœ
â””â”€â”€ poet/model_name/
    â”œâ”€â”€ model_name_poet_detailed.json    # POETè¯¦ç»†ç»“æœ
    â”œâ”€â”€ model_name_poet_summary.json     # POETå…³é”®æŒ‡æ ‡æ±‡æ€»
    â””â”€â”€ model_name_poet_report.txt       # ç»¼åˆåˆ†ææŠ¥å‘Š
```

## æ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡è§£è¯»

### æ•ˆç‡ä»·å€¼æŒ‡æ ‡
- **æ—¶é—´èŠ‚çº¦ç‡** = (ä¸“å®¶é¢„æœŸæ—¶é—´ - å®é™…æ‰§è¡Œæ—¶é—´) / ä¸“å®¶é¢„æœŸæ—¶é—´
- **æˆæœ¬èŠ‚çº¦é¢** = ä¸“å®¶æˆæœ¬ - AIæˆæœ¬
- **è‡ªåŠ¨åŒ–ç¨‹åº¦** = execution_metrics.automation_level
- **èµ„æºæ•ˆç‡** = è¾“å‡ºè´¨é‡ / Tokenæ¶ˆè€—

### è´¨é‡ä»·å€¼æŒ‡æ ‡
- **RACEç»¼åˆåˆ†** = å…¨é¢æ€§Ã—æƒé‡ + æ´å¯ŸåŠ›Ã—æƒé‡ + æŒ‡ä»¤éµå¾ªÃ—æƒé‡ + å¯è¯»æ€§Ã—æƒé‡
- **å¼•ç”¨å‡†ç¡®ç‡** = å‡†ç¡®å¼•ç”¨æ•° / æ€»å¼•ç”¨æ•°
- **å¼•ç”¨ä¸°å¯Œåº¦** = æœ‰æ•ˆå¼•ç”¨æ•° / æŠ¥å‘Šé•¿åº¦

### æˆ˜ç•¥ä»·å€¼æŒ‡æ ‡
- **ä»»åŠ¡å¤æ‚åº¦é€‚åº”æ€§** = åŸºäºä»»åŠ¡å¤æ‚åº¦å’Œå®Œæˆè´¨é‡çš„ç»¼åˆè¯„ä¼°
- **çŸ¥è¯†åˆ›é€ ä»·å€¼** = æ–°çŸ¥è¯†å•å…ƒæ•°é‡å’Œè´¨é‡è¯„ä¼°

### POETç»¼åˆåˆ†è®¡ç®—
```
POETç»¼åˆåˆ† = æ•ˆç‡ä»·å€¼ Ã— 30% + è´¨é‡ä»·å€¼ Ã— 50% + æˆ˜ç•¥ä»·å€¼ Ã— 20%
```

## ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæ¨¡å—

#### æŸ¥è¯¢ç®¡ç†ç³»ç»Ÿ
- `query_selector.py`: POET 7ç»´åº¦æŸ¥è¯¢ä»·å€¼è¯„ä¼°å’Œç­›é€‰
- `convert_md_to_jsonl.py`: MarkdownæŸ¥è¯¢è½¬JSONLæ ¼å¼è½¬æ¢å™¨
- `query_rubrics_generator.py`: æŸ¥è¯¢ç‰¹å®šçš„Rubricç”Ÿæˆå™¨

#### è¯„ä¼°å¼•æ“
- `poet_benchmark.py`: POETå®Œæ•´è¯„ä¼°ç³»ç»Ÿï¼ˆæ¨èä½¿ç”¨ï¼‰
- `deepresearch_bench_race.py`: RACE 4ç»´åº¦è´¨é‡è¯„ä¼°ä¸»ç¨‹åº
- `utils/efficiency_evaluator_clean.py`: æ•ˆç‡ä»·å€¼è¯„ä¼°å™¨
- `utils/strategic_evaluator.py`: æˆ˜ç•¥ä»·å€¼è¯„ä¼°å™¨
- `utils/web_interaction_evaluator.py`: Webäº¤äº’èƒ½åŠ›è¯„ä¼°å™¨

#### FACTäº‹å®éªŒè¯æµæ°´çº¿
- `utils/extract.py`: ä»æŠ¥å‘Šä¸­æå–äº‹å®é™ˆè¿°å’Œå¼•ç”¨
- `utils/deduplicate.py`: å»é™¤é‡å¤çš„äº‹å®-URLå¯¹
- `utils/scrape.py`: åŸºäºJina APIçš„ç½‘é¡µå†…å®¹æŠ“å–
- `utils/validate.py`: LLMé©±åŠ¨çš„å¼•ç”¨éªŒè¯
- `utils/stat.py`: FACTè¯„ä¼°ç»Ÿè®¡åˆ†æ

#### è‡ªåŠ¨åŒ–æµç¨‹
- `run_benchmark.sh`: ä¼ ç»ŸRACE+FACTè¯„ä¼°æµæ°´çº¿
- `config/poet_algorithm_config.json`: é…ç½®é©±åŠ¨çš„å‚æ•°ç®¡ç†

### POETæ•°æ®æµç¨‹
1. **æŸ¥è¯¢ä»·å€¼è¯„ä¼°**: 7ç»´åº¦å•†ä¸šä»·å€¼è¯„ä¼°å’Œé«˜ä»·å€¼æŸ¥è¯¢ç­›é€‰
2. **åŠ¨æ€æ ‡å‡†ç”Ÿæˆ**: åŸºäºæŸ¥è¯¢ç‰¹æ€§è‡ªåŠ¨ç”Ÿæˆè¯„ä¼°Rubricå’Œæƒé‡
3. **è´¨é‡ä»·å€¼è¯„ä¼°**: RACE 4ç»´åº¦è´¨é‡è¯„ä¼° + FACTå¼•ç”¨å¯ä¿¡åº¦éªŒè¯
4. **æ•ˆç‡ä»·å€¼è¯„ä¼°**: æ—¶é—´æˆæœ¬åˆ†æå’Œèµ„æºæ¶ˆè€—ç»Ÿè®¡
5. **æˆ˜ç•¥ä»·å€¼è¯„ä¼°**: å¤æ‚ä»»åŠ¡å¤„ç†èƒ½åŠ›å’ŒçŸ¥è¯†æ²‰æ·€è¯„ä¼°
6. **ç»¼åˆä»·å€¼è®¡ç®—**: ä¸‰å¤§ä»·å€¼ç»´åº¦åŠ æƒè®¡ç®—POETç»¼åˆåˆ†
7. **æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆè¯¦ç»†çš„å•†ä¸šä»·å€¼åˆ†ææŠ¥å‘Š

## é…ç½®é€‰é¡¹

### è¯„ä¼°å‚æ•°è°ƒæ•´
åœ¨ `run_benchmark.sh` ä¸­å¯è°ƒæ•´ï¼š
- `N_TOTAL_PROCESS=10`: å¹¶è¡Œå¤„ç†è¿›ç¨‹æ•°
- `LIMIT="--limit 2"`: é™åˆ¶è¯„ä¼°ä»»åŠ¡æ•°é‡ï¼ˆæµ‹è¯•ç”¨ï¼‰
- `SKIP_CLEANING="--skip_cleaning"`: è·³è¿‡æ–‡ç« é¢„å¤„ç†
- `ONLY_ZH="--only_zh"`: ä»…è¯„ä¼°ä¸­æ–‡ä»»åŠ¡
- `ONLY_EN="--only_en"`: ä»…è¯„ä¼°è‹±æ–‡ä»»åŠ¡

### POETé…ç½®ç®¡ç†
åœ¨ `config/poet_algorithm_config.json` ä¸­å¯è‡ªå®šä¹‰å‚æ•°ï¼š
```json
{
    "poet_weights": {
        "efficiency_value": 0.30,
        "quality_value": 0.50,
        "strategic_value": 0.20
    },
    "race_weights": {
        "comprehensiveness": 0.25,
        "insight": 0.35,
        "instruction_following": 0.25,
        "readability": 0.15
    },
    "query_selection": {
        "threshold": 4.0,
        "enable_dynamic_weighting": true
    },
    "evaluation_settings": {
        "max_workers": 10,
        "enable_parallel_processing": true,
        "language_support": ["zh", "en"]
    }
}
```

## æœ€ä½³å®è·µ

### æ•°æ®æ”¶é›†å»ºè®®
1. **å‡†ç¡®è®°å½•æ‰§è¡Œæ—¶é—´**: ä»ä»»åŠ¡å¼€å§‹åˆ°å®Œæˆçš„å‡†ç¡®æ—¶é—´æˆ³
2. **ç²¾ç¡®ç»Ÿè®¡Tokenç”¨é‡**: ä½¿ç”¨APIè¿”å›çš„å®é™…Tokenæ•°é‡
3. **å®¢è§‚è¯„ä¼°è‡ªåŠ¨åŒ–ç¨‹åº¦**: åŸºäºå®é™…äººå·¥å¹²é¢„æ¬¡æ•°è®¡ç®—
4. **å®Œæ•´è®°å½•å·¥å…·è°ƒç”¨**: åŒ…æ‹¬å¤±è´¥çš„è°ƒç”¨æ¬¡æ•°
5. **å‡†ç¡®è®¡ç®—å®é™…æˆæœ¬**: åŸºäºå®é™…APIè´¹ç”¨è€Œéä¼°ç®—

### æ ‡æ³¨æ•°æ®ç»´æŠ¤
1. **å®šæœŸæ›´æ–°ä¸“å®¶è´¹ç‡**: åŸºäºå¸‚åœºè°ƒç ”ä¿æŒæ•°æ®æ—¶æ•ˆæ€§
2. **æ ¡å‡†å¤æ‚åº¦åˆ†çº§**: åŸºäºå®é™…ä»»åŠ¡è¡¨ç°è°ƒæ•´å¤æ‚åº¦å®šä¹‰
3. **åŒæ­¥Tokenå®šä»·**: åŠæ—¶æ›´æ–°å„æ¨¡å‹çš„æœ€æ–°å®šä»·ä¿¡æ¯

### è¯„ä¼°è´¨é‡ä¿è¯
1. **æ•°æ®æ ¼å¼éªŒè¯**: è¿è¡Œå‰æ£€æŸ¥æ‰€æœ‰å¿…éœ€å­—æ®µå®Œæ•´æ€§
2. **ç»“æœäº¤å‰éªŒè¯**: å¯¹å¼‚å¸¸é«˜åˆ†æˆ–ä½åˆ†ç»“æœè¿›è¡Œäººå·¥å¤æŸ¥
3. **åŸºå‡†å¯¹æ¯”**: ä¸äººç±»ä¸“å®¶è¡¨ç°è¿›è¡Œå®šæœŸåŸºå‡†å¯¹æ¯”
4. **æŒç»­æ”¹è¿›**: åŸºäºè¯„ä¼°ç»“æœåé¦ˆä¼˜åŒ–è¯„ä¼°æ ‡å‡†

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼ºå°‘execution_metricså­—æ®µ**
   ```bash
   # æ£€æŸ¥æ•°æ®æ ¼å¼
   python -c "
   import json
   with open('data/test_data/raw_data/model.jsonl') as f:
       for line in f:
           data = json.loads(line)
           print('execution_metrics' in data)
           break
   "
   ```

2. **APIå¯†é’¥æœªè®¾ç½®**
   ```bash
   echo $OPENAI_API_KEY
   echo $OPENAI_BASE_URL
   echo $OPENAI_MODEL
   echo $JINA_API_KEY
   ```

3. **æ ‡æ³¨æ•°æ®ç¼ºå¤±**
   ```bash
   ls data/annotation/
   # åº”è¯¥çœ‹åˆ°: domain_expert_data.json, complexity_level_data.json, token_pricing_data.json
   ```
